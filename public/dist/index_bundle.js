(()=>{"use strict";var e={10:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function d(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,d)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{static loadAll(e){return n(this,void 0,void 0,(function*(){yield new Promise((t=>n(this,void 0,void 0,(function*(){const n=e.map(((e,t)=>new Promise((n=>{const o=new Image;o.src=e,o.addEventListener("load",(()=>{i.assets[e]=o,n(t)}))}))));i.promises=n,yield Promise.allSettled(n).then((e=>{t("done"),console.log(e)}))}))))}))}static get(e){return i.assets[e]}}i.assets={},t.default=i},826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Wait=void 0,t.Wait=function(e){return new Promise((t=>{setTimeout((()=>{t("")}),1e3*e)}))}},934:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function d(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,d)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const a=n(826),s=o(n(10));t.Game=class{constructor(e){this.player=e.player,this.opponent=e.opponent}start(){return i(this,void 0,void 0,(function*(){s.default.loadAll(["../public/assets/deck-zone.png"]).then((()=>i(this,void 0,void 0,(function*(){this.init();for(let e=0;e<3;e++)yield(0,a.Wait)(.35),this.player.drawCard()}))))}))}init(){document.getElementById("canvas").getContext("2d").drawImage(s.default.get("../public/assets/deck-zone.png"),0,0),this.player.initHand()}}},768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,t.Card=class{constructor(e){this.name=e.name,this.atk=e.attack,this.def=e.defence}}},630:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Opponent=void 0,t.Opponent=class{constructor(){}}},363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,t.Player=class{constructor(e){this.hand=new Map,this.deck=new Map,this.name=e}initHand(){this.hand.clear()}addToHand(e){this.hand.set(this.hand.size,e),this.updateHand(e)}addToDeck(e){this.deck.set(this.deck.size,e),this.updateDeck()}removeToDeck(e){this.deck.delete(e),this.updateDeck()}drawCard(){let e=this.deck.get(this.deck.size-1);this.removeToDeck(this.deck.size-1),this.addToHand(e)}updateHand(e){const t=document.getElementById("player-hand"),n=document.createElement("img"),i=document.body.getBoundingClientRect().width/100*10;n.src="./assets/card/front.png",n.alt=e.name,n.classList.add("card","card-on-hand"),n.style.left=window.innerWidth-i-(20+5*this.deck.size)+"px",n.addEventListener("mouseover",(()=>{n.style.zIndex="2",n.style.transform+="translateY(-20px)"})),n.addEventListener("mouseout",(()=>{n.style.zIndex="1",n.style.transform+="translateY(20px)"})),t.append(n),setTimeout((()=>{n.style.left=20+120*(this.hand.size-1)+"px"}),0)}updateDeck(){const e=document.getElementById("player-deck");e.replaceChildren(),this.deck.forEach(((t,n)=>{const i=document.createElement("img");i.src="./assets/card/back.png",i.alt=t.name,i.classList.add("card"),i.style.right=5*n+20+"px",e.append(i)}))}}},25:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function d(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,d)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Scenario=void 0;const o=n(826),a=document.getElementById("player-container"),s=document.getElementById("scenario-container"),d=document.body;t.Scenario=class{on(){return i(this,void 0,void 0,(function*(){s.classList.remove("hidden"),yield(0,o.Wait)(1),a.style.bottom=`-${d.getBoundingClientRect().height/100*40}px`,yield(0,o.Wait)(.1),s.classList.remove("scenario-off"),s.classList.add("scenario-on")}))}off(){return i(this,void 0,void 0,(function*(){yield(0,o.Wait)(1),s.classList.add("scenario-off"),s.classList.remove("scenario-on"),yield(0,o.Wait)(.1),a.style.bottom="0px",yield(0,o.Wait)(1),s.classList.add("hidden")}))}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}(()=>{const e=n(768),t=n(363),i=n(934),o=n(630),a=n(25),s=document.getElementById("canvas"),d=s.getContext("2d");s.style.width=`${window.innerWidth}px`,s.style.height=`${window.innerHeight}px`,s.width=window.innerWidth,s.height=window.innerHeight,d.fillStyle="#000",d.fillRect(s.width/2-25,s.height/100*60-50,50,50);const c=document.getElementById("player-deck"),r=new e.Card({name:"loti",attack:10,defence:10,health:10}),l=new t.Player("tester"),u=new o.Opponent;c.addEventListener("click",(()=>{l.hand.size<10&&l.deck.size>0&&l.drawCard()}));for(let e=0;e<30;e++)l.addToDeck(r);const h=new i.Game({player:l,opponent:u}),p=new a.Scenario;p.on(),setTimeout((()=>{p.off().then((()=>{h.start()}))}),2e3)})()})();