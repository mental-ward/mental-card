(()=>{"use strict";var e={607:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(768),d=n(363),s=n(934),o=n(630),r=i(n(10)),c=document.getElementById("canvas"),l=(c.getContext("2d"),window.devicePixelRatio);c.style.width=`${window.innerWidth}px`,c.style.height=`${window.innerHeight}px`,c.width=window.innerWidth*l,c.height=window.innerHeight*l;const u=document.getElementById("player-deck"),h=new a.Card({name:"loti",attack:10,defence:10,health:10}),p=new d.Player("tester"),f=new o.Opponent;u.addEventListener("click",(()=>{p.hand.size<10&&p.deck.size>0&&p.drawCard()}));for(let e=0;e<30;e++)p.addToDeck(h);const m=new s.Game(5,{player:p,opponent:f});r.default.loadAll(["../public/assets/deck-zone.png","../public/assets/card-zoneX3.png","../public/assets/card-zoneX4.png","../public/assets/card-zoneX5.png"]).then((()=>{m.start()}))},10:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,d){function s(e){try{r(i.next(e))}catch(e){d(e)}}function o(e){try{r(i.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}r((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{static loadAll(e){return n(this,void 0,void 0,(function*(){yield new Promise((t=>n(this,void 0,void 0,(function*(){const n=e.map(((e,t)=>new Promise((n=>{const a=new Image;a.src=e,a.addEventListener("load",(()=>{i.assets[e]=a,n(t)}))}))));i.promises=n,yield Promise.allSettled(n).then((e=>{t("done"),console.log(e)}))}))))}))}static get(e){return i.assets[e]}}i.assets={},t.default=i},826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Wait=void 0,t.Wait=function(e){return new Promise((t=>{setTimeout((()=>{t("")}),1e3*e)}))}},934:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,d){function s(e){try{r(i.next(e))}catch(e){d(e)}}function o(e){try{r(i.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}r((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const a=n(826),d=n(87);t.Game=class{constructor(e,t){this.player=t.player,this.opponent=t.opponent,this.numOfField=e}start(){return i(this,void 0,void 0,(function*(){this.init();for(let e=0;e<3;e++)yield(0,a.Wait)(.35),this.player.drawCard()}))}init(){document.getElementById("canvas").getContext("2d"),new d.Field(this.numOfField).draw(),this.player.initHand()}}},87:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const a=i(n(10));t.Field=class{constructor(e){this.numOfCardZone=e}draw(){const e="../public/assets/card-zoneX4.png",t=document.body,n=window.devicePixelRatio,i=document.getElementById("canvas").getContext("2d"),d=a.default.get(e).width,s=a.default.get(e).height,o=t.getBoundingClientRect().height*n/100*60/2-s+3,r=t.getBoundingClientRect().width*n/2-d*this.numOfCardZone/2+3*(this.numOfCardZone-1)/2;for(let t=0;t<2;t++)for(let n=0;n<this.numOfCardZone;n++)i.drawImage(a.default.get(e),r+(d-3)*n,o+(s-3)*t)}}},768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,t.Card=class{constructor(e){this.name=e.name,this.atk=e.attack,this.def=e.defence}}},630:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Opponent=void 0,t.Opponent=class{constructor(){}}},363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,t.Player=class{constructor(e){this.hand=new Map,this.deck=new Map,this.name=e}initHand(){this.hand.clear()}addToHand(e){this.hand.set(this.hand.size,e),this.updateHand(e)}addToDeck(e){this.deck.set(this.deck.size,e),this.updateDeck()}removeToDeck(e){this.deck.delete(e),this.updateDeck()}drawCard(){let e=this.deck.get(this.deck.size-1);this.removeToDeck(this.deck.size-1),this.addToHand(e)}updateHand(e){const t=document.getElementById("player-hand"),n=document.createElement("img"),i=document.body.getBoundingClientRect().width/100*10;n.src="./assets/card/front.png",n.alt=e.name,n.classList.add("card","card-on-hand"),n.style.left=window.innerWidth-i-(20+5*this.deck.size)+"px",n.addEventListener("mouseover",(()=>{n.style.zIndex="2",n.style.transform+="translateY(-20px)"})),n.addEventListener("mouseout",(()=>{n.style.zIndex="1",n.style.transform+="translateY(20px)"})),t.append(n),setTimeout((()=>{n.style.left=20+120*(this.hand.size-1)+"px"}),0)}updateDeck(){const e=document.getElementById("player-deck");e.replaceChildren(),this.deck.forEach(((t,n)=>{const i=document.createElement("img");i.src="./assets/card/back.png",i.alt=t.name,i.classList.add("card"),i.style.right=5*n+20+"px",e.append(i)}))}}}},t={};!function n(i){var a=t[i];if(void 0!==a)return a.exports;var d=t[i]={exports:{}};return e[i].call(d.exports,d,d.exports,n),d.exports}(607)})();